# Google Apps Script (GAS) セットアップ手順

以下の手順に従って、Google スプレッドシートと GAS をセットアップしてください。

## 1. スプレッドシートの作成
1.  [Google スプレッドシート](https://sheets.new) を新規作成します。
2.  タイトルを「AI Governance RSS」などに変更します。

## 2. GAS スクリプトの作成
1.  メニューの **「拡張機能」** > **「Apps Script」** をクリックします。
2.  エディタが開くので、既存のコード（`myFunction`など）をすべて削除します。
3.  このプロジェクトにある `gas_code.js` の内容をすべてコピーして貼り付けます。
4.  プロジェクト名を「RSS Fetcher」などに変更し、保存（💾 アイコン）します。

## 3. 初期セットアップ
1.  ツールバーの関数プルダウンから **`setup`** を選択します。
2.  **「実行」** ボタンをクリックします。
3.  **「承認が必要です」** と出たら：
    - 「権限を確認」をクリック
    - アカウントを選択
    - 「このアプリは Google で確認されていません」と出たら、左下の **「詳細」** > **「RSS Fetcher（安全ではないページ）に移動」** をクリック
    - 「許可」をクリック
4.  実行が完了すると、スプレッドシートに `Feeds` と `Articles` というシートが自動作成されます。

## 4. RSSフィードの登録
1.  スプレッドシートの `Feeds` シートを開きます。
2.  テスト用にサンプルデータが入っていますが、必要に応じて行を追加してください。
    - **Feed Name**: サイト名
    - **RSS URL**: RSSのURL
    - **Jurisdiction**: 管轄（EU, US, JP など。カードの画像部分に表示されます）
    - **Translate**: `TRUE` にすると日本語翻訳されます。

## 5. 動作テスト
1.  GASエディタに戻り、関数プルダウンから **`updateFeeds`** を選択して「実行」します。
2.  ログに `Fetching...` `Added...` と表示されれば成功です。
3.  スプレッドシートの `Articles` シートに記事が追加されていることを確認してください。

## 6. トリガー設定（定期実行）
1.  左サイドバーの **「トリガー」**（時計アイコン）をクリックします。
2.  **「トリガーを追加」** をクリックします。
    - 実行する関数: `updateFeeds`
    - イベントのソース: **時間主導型**
    - タイプ: **時間ベースのタイマー**
    - 間隔: **1時間おき**（またはお好みの間隔）
3.  「保存」をクリックします。

## 7. Web API としてデプロイ
1.  右上の **「デプロイ」** > **「新しいデプロイ」** をクリックします。
2.  「種類の選択」の歯車アイコン > **「ウェブアプリ」** を選択します。
3.  設定：
    - 説明: `RSS API`
    - 次のユーザーとして実行: **自分**
    - アクセスできるユーザー: **全員** （※重要：これを選択しないとサイトからアクセスできません）
4.  **「デプロイ」** をクリックします。
5.  **「ウェブアプリ URL」** が表示されるので、これをコピーしてください。
    - `https://script.google.com/macros/s/.../exec` という形式です。

## 完了
コピーした **ウェブアプリ URL** を教えてください。サイト側のコードに組み込みます。
