# AI Governance Monitor - 要件定義書 v2.0

## 1. プロジェクト概要

### ビジョン
**スーパー自動化AIガバナンスHP** - 世界各国のAI法規制を全自動で収集し、日英バイリンガルで公開する

### ゴール
- AI法規制情報の自動収集・翻訳・公開
- 美しく使いやすいUI（3D地球儀、レスポンシブデザイン）
- 運用コスト最小化（無料サービスの活用）

---

## 2. システムアーキテクチャ

### 2.1 現在の構成

```
┌──────────────────────────────────────────────────────┐
│                    ユーザー                           │
│                   (ブラウザ)                          │
└──────────────────────────────────────────────────────┘
                        │
                        ▼
┌──────────────────────────────────────────────────────┐
│              フロントエンド (Vercel)                  │
│                                                      │
│  React 19 + Vite + Tailwind CSS                     │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐                │
│  │ 3D Globe│ │ カード  │ │アーカイブ│                │
│  │  (COBE) │ │  一覧   │ │  検索   │                │
│  └─────────┘ └─────────┘ └─────────┘                │
└──────────────────────────────────────────────────────┘
                        │ fetch
                        ▼
┌──────────────────────────────────────────────────────┐
│              バックエンド (Google Apps Script)        │
│                                                      │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐                │
│  │  RSS    │ │ Gemini  │ │Federal  │                │
│  │ Fetcher │ │ Filter  │ │Register │                │
│  └─────────┘ └─────────┘ └─────────┘                │
└──────────────────────────────────────────────────────┘
                        │
                        ▼
┌──────────────────────────────────────────────────────┐
│              データベース (Google Sheets)             │
│                                                      │
│  ┌─────────────────┐ ┌─────────────────┐            │
│  │  Feeds シート   │ │ Articles シート │            │
│  │ (RSS URL一覧)  │ │  (収集記事)     │            │
│  └─────────────────┘ └─────────────────┘            │
└──────────────────────────────────────────────────────┘
```

### 2.2 将来の構成（Phase 2）

```
                        ┌─────────────────┐
                        │   Sanity CMS    │
                        │ (AI法解説ブログ) │
                        └─────────────────┘
                               │
┌──────────────────────────────┼──────────────────────┐
│              フロントエンド   │                      │
│                              │                      │
│  ┌─────────┐ ┌─────────┐ ┌──▼──────┐              │
│  │ニュース │ │ カード  │ │法令解説 │              │
│  │ (自動)  │ │  一覧   │ │(2カラム)│              │
│  └─────────┘ └─────────┘ └─────────┘              │
└──────────────────────────────────────────────────────┘
```

---

## 3. 機能要件

### 3.1 Phase 1（現在）

#### ニュース自動収集
| 機能 | 説明 | 状態 |
|------|------|------|
| RSS収集 | 各国のAI規制関連RSSから記事取得 | 実装済 |
| Geminiフィルタ | AIで法規制ニュースかどうか判定 | 実装済 |
| 自動翻訳 | 英語→日本語の自動翻訳 | 実装済 |
| Federal Register | 米国連邦公報API連携 | 実装済 |

#### フロントエンド
| 機能 | 説明 | 状態 |
|------|------|------|
| 3D地球儀 | インタラクティブなグローブ表示 | 実装済 |
| 最新ニュース | カード形式で6件表示 | 実装済 |
| アーカイブ検索 | キーワード・地域フィルタ | 実装済 |
| レスポンシブ | モバイル対応 | 実装済 |

#### 運用
| 機能 | 説明 | 状態 |
|------|------|------|
| GAS手動デプロイ | コピペでGASに反映 | 現状 |
| clasp導入 | コマンド1つでデプロイ | 準備中 |

### 3.2 Phase 2（将来）

#### AI法解説ブログ
| 機能 | 説明 | 優先度 |
|------|------|--------|
| 2カラム表示 | 原文（左）/ 日本語（右） | 高 |
| 章・条分割 | 法令を構造化して表示 | 高 |
| 3行要約 | 各セクションの要点 | 中 |
| 具体例 | 実務での適用例 | 中 |
| Sanity CMS | コンテンツ管理 | 高 |

対象法令（予定）:
- EU AI Act
- 日本 AI事業者ガイドライン
- 米国 Executive Order on AI
- 中国 生成AI管理弁法

---

## 4. 技術要件

### 4.1 フロントエンド

| 項目 | 技術 | バージョン |
|------|------|-----------|
| フレームワーク | React | 19.x |
| ビルドツール | Vite | 7.x |
| スタイリング | Tailwind CSS | 3.x |
| 3D描画 | COBE | 0.6.x |
| アニメーション | Framer Motion | 12.x |
| ホスティング | Vercel | - |

### 4.2 バックエンド

| 項目 | 技術 | 備考 |
|------|------|------|
| ランタイム | Google Apps Script | 無料 |
| AI | Gemini API | 無料枠あり |
| 翻訳 | Google Translate (GAS) | 無料 |
| 外部API | Federal Register | 無料 |
| デプロイ | clasp | 無料 |

### 4.3 データベース

| 項目 | 技術 | 備考 |
|------|------|------|
| 記事DB | Google Sheets | 無料 |
| CMS | Sanity（将来） | 無料枠あり |

---

## 5. 非機能要件

### 5.1 パフォーマンス
- ページ読み込み: 3秒以内
- 3D地球儀: 60fps維持

### 5.2 コスト
- **無料が大前提**
- 有料サービスは使用しない
- APIは無料枠内で運用

### 5.3 運用性
- コピペ作業の最小化（clasp導入）
- 自動化可能な部分は自動化

### 5.4 拡張性
- 新しい国・法令の追加が容易
- カスタムコマンドで運用効率化

---

## 6. カスタムコマンド構成

### 現在
```
.claude/commands/
└── check.md          # サイト更新チェック
```

### 将来（案）
```
.claude/commands/
├── check.md          # サイト更新チェック
├── design.md         # デザイン調整専用
├── gas-deploy.md     # GASデプロイ（clasp push）
└── add-law.md        # 新しい法令解説を追加
```

---

## 7. デプロイフロー

### 現在
```
1. コード編集
2. git commit & push
3. Vercel が自動デプロイ（フロント）
4. GAS エディタにコピペ（バックエンド）← めんどい
5. GAS で「新しいデプロイ」
```

### clasp導入後
```
1. コード編集
2. git commit & push
3. Vercel が自動デプロイ（フロント）
4. clasp push（バックエンド）← コマンド1つ！
5. clasp deploy
```

---

## 8. 既知の課題

| 課題 | 状態 | 対応 |
|------|------|------|
| GAS API 403エラー | 未解決 | アクセス権限を「全員」に変更 |
| スプレッドシート→HP連携 | 未確認 | API修正後に確認 |
| デザイン調整の難しさ | 認識済 | デザインシステム整理を検討 |

---

## 9. ロードマップ

### Phase 1: 基盤安定化（現在）
- [x] React + GAS 基本構成
- [x] RSS自動収集
- [x] Geminiフィルタリング
- [ ] GAS APIアクセス権限修正
- [ ] clasp導入

### Phase 2: 運用効率化
- [ ] カスタムコマンド整備
- [ ] デザインシステム整理
- [ ] GitHub Actions 自動化

### Phase 3: AI法令解説（Sanity）

> 詳細は [docs/SANITY_REQUIREMENTS.md](./docs/SANITY_REQUIREMENTS.md) を参照

#### 概要
- 法令の原文と日本語訳を並べて表示
- 日本語クリック → 原文ハイライト機能
- Chapter 1 無料、全章は有料（note連携）

#### 実装項目
- [ ] Sanity CMS導入
- [ ] 法令解説セクション（トップページ）
- [ ] 2カラム/3カラムレイアウト
- [ ] ハイライト機能（青い下線）
- [ ] パスワード認証（有料化）
- [ ] EU AI Act コンテンツ投入

#### コンテンツ作成フロー
```
原文(ユーザー提供) → Claude Code処理 → AIクロスチェック → ユーザー確認 → Sanity投入
```

---

## 付録: データ構造

### Feedsシート
| 列 | 項目 | 例 |
|----|------|---|
| A | Feed Name | NIST News |
| B | RSS URL | https://www.nist.gov/.../rss.xml |
| C | Jurisdiction | US |
| D | Translate | true |

### Articlesシート
| 列 | 項目 | 例 |
|----|------|---|
| A | ID | uuid |
| B | Jurisdiction | US |
| C | Title | AI Safety Guidelines |
| D | Title (JA) | AI安全ガイドライン |
| E | Description | ... |
| F | Description (JA) | ... |
| G | Link | https://... |
| H | Date | 2025-01-08 |

---

**作成日**: 2025-01-08
**バージョン**: 2.0
**前バージョン**: 1.0（静的HTML版）
