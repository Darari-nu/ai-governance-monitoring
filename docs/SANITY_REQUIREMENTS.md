# AI法令解説機能 - 要件定義書

> Sanity CMSを使った法令解説ブログの仕様

## 1. 概要

### 目的
AI関連法令の原文を、日本語対訳付きで見やすく提供する。
法務・コンプライアンス担当者が「原文を自分の目で確認」できることが価値。

### ビジネスモデル
- **無料**: Chapter 1（総則）のみ閲覧可能
- **有料**: 全章閲覧可能（ワンコイン、note経由でパスワード発行）

---

## 2. 対象法令

### Phase 1
- EU AI Act（全113条 + 付属書）

### Phase 2以降（予定）
- 日本 AI事業者ガイドライン
- 米国 Executive Order on AI
- 中国 生成AI管理弁法

---

## 3. ページ構成

### 3.1 トップページ（法令解説セクション）

```
┌─────────────────────────────────────────┐
│  📚 法令解説                            │
│  ┌─────────────────┐ ┌─────────────────┐│
│  │  🇪🇺             │ │  🇯🇵             ││
│  │  EU AI Act      │ │  日本ガイドライン ││
│  │  全113条 解説   │ │  [準備中]        ││
│  │                 │ │                 ││
│  │ [解説を読む →]  │ │                 ││
│  └─────────────────┘ └─────────────────┘│
└─────────────────────────────────────────┘
```

**カードデザイン**: シンプルカード（国旗アイコン + 法令名 + ボタン）

### 3.2 法令解説ページ

```
┌──────────┬─────────────────────────────────┐
│          │                                 │
│  目次     │        メインコンテンツ          │
│ (固定)    │                                 │
│          ├────────────────┬────────────────┤
│ ├ Ch.1 ✓ │   日本語       │   原文(EN)     │
│ ├ Ch.2 🔒│                │                │
│ ├ Ch.3 🔒│  高リスクAI    │  High-risk AI  │
│ └ ...    │  システムは... │  systems...    │
│          │                │                │
│          ├────────────────┴────────────────┤
│          │  📝 3行要約                      │
│          │  • ポイント1                     │
│          │  • ポイント2                     │
│          │  • ポイント3                     │
│          ├─────────────────────────────────┤
│          │  💡 具体例                       │
│          │  採用AIの場合、〇〇に該当し...   │
└──────────┴─────────────────────────────────┘
```

### 3.3 カラム構成

| 原文の言語 | カラム数 | 構成 |
|-----------|---------|------|
| 英語 | 2カラム | 日本語 / 原文(EN) |
| 英語以外 | 3カラム | 日本語 / English / 原文 |

**EU AI Act**: 英語が正 → 2カラム

### 3.4 スマホ対応

```
┌─────────────────────┐
│ [≡ 目次]            │  ← ハンバーガーメニュー
├─────────────────────┤
│ [日本語] [原文]     │  ← タブ切り替え
├─────────────────────┤
│                     │
│  高リスクAIシステム  │
│  は...              │
│                     │
└─────────────────────┘
```

3カラムの場合: `[日本語] [EN] [原文]`

---

## 4. ハイライト機能

### 概要
日本語テキストをクリック/ドラッグすると、対応する原文がハイライトされる。

### 動作

```
【クリック前】
┌────────────────┬────────────────┐
│ 日本語         │ 原文(EN)       │
├────────────────┼────────────────┤
│ 高リスクAI     │ High-risk AI   │
│ システムは...  │ systems...     │
└────────────────┴────────────────┘

【日本語をクリック】
┌────────────────┬────────────────┐
│ 日本語         │ 原文(EN)       │
├────────────────┼────────────────┤
│ 高リスクAI     │ High-risk AI   │
│ システムは... ←│ systems...     │
│   クリック！   │ ═══════════    │
│                │ ↑ 青い下線     │
└────────────────┴────────────────┘
```

### ハイライトスタイル
- **青い下線**（既存サイトのアクセントカラーに合わせる）

### 実装方針
- 各文にIDを付与
- 日本語側の `data-ref` 属性で原文側のIDを参照
- クリック時に対応要素に `.highlighted` クラスを付与

---

## 5. 有料化・認証

### フロー

```
1. ユーザーがHPから「解説を読む」をクリック
2. Chapter 1 は無料で閲覧可能
3. Chapter 2 以降は「🔒」表示
4. 「noteで購入する」ボタン → note記事へ
5. note購入者にパスワード発行
6. サイトでパスワード入力 → 全章解放
```

### パスワード管理
- シンプルな共通パスワード方式（MVP）
- 将来的にはSupabase Auth等で個別認証も検討可能

---

## 6. コンテンツ作成フロー

### 自動化プロセス

```
┌─────────────────────────────────────────────────────┐
│                    原文（EN）                        │
│               （ユーザーが提供）                     │
└─────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────┐
│               Claude Code 処理                       │
│                                                     │
│  1. 構造化（章・条に分割、JSON形式に変換）           │
│  2. 翻訳（Claude + Gemini クロスチェック）          │
│  3. 要約生成（各条文の3行要約）                     │
│  4. 具体例生成                                      │
└─────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────┐
│                  AIクロスチェック                    │
│                                                     │
│  ┌─────────┐        ┌─────────┐                    │
│  │ Claude  │   vs   │ Gemini  │                    │
│  │  翻訳   │        │  翻訳   │                    │
│  └─────────┘        └─────────┘                    │
│        │                 │                          │
│        └────────┬────────┘                          │
│                 ▼                                   │
│       ┌─────────────────┐                          │
│       │ 一致 → 自動採用  │                          │
│       │ 不一致 → 要確認  │                          │
│       └─────────────────┘                          │
└─────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────┐
│                 ユーザー確認                         │
│                                                     │
│  - 要約のチェック（必須）                           │
│  - 翻訳不一致箇所の確認（AIが抽出した部分のみ）     │
│  - 最終ざっと確認                                   │
└─────────────────────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────┐
│                 Sanity投入                          │
└─────────────────────────────────────────────────────┘
```

### 見積もり時間

| 工程 | 時間 | 担当 |
|------|------|------|
| 原文入手 | 数分 | ユーザー |
| 構造化・翻訳・要約 | 数時間 | Claude Code |
| AIクロスチェック | 自動 | Claude + Gemini |
| ユーザー確認 | 約6時間 | ユーザー |
| Sanity投入 | 1時間 | Claude Code |
| **合計** | **約1日** | |

---

## 7. データ構造（Sanity Schema）

### Law（法令）

```javascript
{
  name: 'law',
  type: 'document',
  fields: [
    { name: 'title', type: 'string' },           // "EU AI Act"
    { name: 'titleJa', type: 'string' },         // "EU AI法"
    { name: 'slug', type: 'slug' },              // "eu-ai-act"
    { name: 'originalLanguage', type: 'string' }, // "en", "zh", etc.
    { name: 'country', type: 'string' },          // "EU"
    { name: 'countryFlag', type: 'string' },      // "🇪🇺"
    { name: 'freeChapters', type: 'array' },      // ["chapter-1"]
    { name: 'password', type: 'string' },         // 有料部分のパスワード
  ]
}
```

### Chapter（章）

```javascript
{
  name: 'chapter',
  type: 'document',
  fields: [
    { name: 'law', type: 'reference', to: [{type: 'law'}] },
    { name: 'number', type: 'number' },          // 1, 2, 3...
    { name: 'title', type: 'string' },           // "General Provisions"
    { name: 'titleJa', type: 'string' },         // "総則"
    { name: 'slug', type: 'slug' },              // "chapter-1"
  ]
}
```

### Article（条文）

```javascript
{
  name: 'article',
  type: 'document',
  fields: [
    { name: 'chapter', type: 'reference', to: [{type: 'chapter'}] },
    { name: 'number', type: 'number' },          // 6
    { name: 'title', type: 'string' },           // "Classification rules..."
    { name: 'titleJa', type: 'string' },         // "分類規則..."
    { name: 'slug', type: 'slug' },              // "article-6"
  ]
}
```

### Sentence（文）

```javascript
{
  name: 'sentence',
  type: 'document',
  fields: [
    { name: 'article', type: 'reference', to: [{type: 'article'}] },
    { name: 'order', type: 'number' },           // 文の順番
    { name: 'original', type: 'text' },          // 原文
    { name: 'english', type: 'text' },           // 英訳（原文が英語以外の場合）
    { name: 'japanese', type: 'text' },          // 日本語訳
    { name: 'sentenceId', type: 'string' },      // "art6-sent1"（ハイライト用）
  ]
}
```

### ArticleSummary（条文要約）

```javascript
{
  name: 'articleSummary',
  type: 'document',
  fields: [
    { name: 'article', type: 'reference', to: [{type: 'article'}] },
    { name: 'summary', type: 'array', of: [{type: 'string'}] },  // 3行要約
    { name: 'example', type: 'text' },           // 具体例
  ]
}
```

---

## 8. デザイン仕様

### カラー
- 既存サイトと統一
- 背景: `slate-50`
- テキスト: `slate-900`
- アクセント: 青系グラデーション

### ハイライト
- 青い下線（`border-bottom: 2px solid #3b82f6`）

### 目次（サイドバー）
- 固定表示（PC）
- 折りたたみ（スマホ）
- 無料章: ✓マーク
- 有料章（未解放）: 🔒マーク

---

## 9. 技術スタック

| 項目 | 技術 | 備考 |
|------|------|------|
| CMS | Sanity | 無料枠で運用 |
| フロントエンド | React（既存） | 法令解説ページを追加 |
| 翻訳AI | Claude + Gemini | 無料枠でクロスチェック |
| 認証 | パスワード方式（MVP） | 将来的にSupabase Auth検討 |
| 決済 | note連携 | パスワード発行 |

---

## 10. 実装ロードマップ

### Step 1: 基盤準備
- [ ] Sanity プロジェクト作成
- [ ] スキーマ定義
- [ ] 既存サイトにルーティング追加（`/laws/eu-ai-act`）

### Step 2: UI実装
- [ ] 法令解説セクション（トップページ）
- [ ] 法令解説ページ（2カラムレイアウト）
- [ ] サイドバー（目次）
- [ ] タブ切り替え（スマホ）

### Step 3: ハイライト機能
- [ ] 文単位のID付与
- [ ] クリックイベント実装
- [ ] ハイライトスタイル適用

### Step 4: 認証・有料化
- [ ] パスワード入力UI
- [ ] 章ごとのロック/解放ロジック
- [ ] note記事作成・パスワード発行フロー

### Step 5: コンテンツ投入
- [ ] EU AI Act 原文取得
- [ ] 自動処理（構造化・翻訳・要約）
- [ ] クロスチェック・修正
- [ ] Sanity投入

---

## 付録: 商品化アイデア

### 自動化プロセスの商品化
この「原文 → 構造化 → 翻訳 → 対訳表示」のプロセス自体を、他の法律事務所やコンプライアンス部門向けに提供できる可能性あり。

```
【サービス案】
「あなたの会社が対応すべき海外法令、対訳付きで読めるようにします」
- 原文を渡すだけ
- AIで構造化・翻訳
- 対訳ビューで納品
```

---

**作成日**: 2025-01-08
**バージョン**: 1.0
